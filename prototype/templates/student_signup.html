{% extends "base.html" %}
{% block title %}Student Signup{% endblock %}
{% block content %}

{% for error in form.username.errors %}
<div class="alert alert-error" id = "error_message">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  {{ error }}
</div>
{% endfor %}
<form class="form-horizontal" action="." method="POST">{% csrf_token %}
		<div class="row-fluid">
			<div class="span3"></div>
			<div class="span6">
        <div class="control-group">
            <label class="control-label" for="id_username">User Name:</label>
            <div class="controls">
                {{ form.username}}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_password">Password1:</label>
            <div class="controls">
                {{ form.password}}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_password_confirm">Password2:</label>
            <div class="controls">
                {{ form.password_confirm}}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_email">E-mail:</label>
            <div class="controls">
                {{ form.email}}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_region">Region:</label>
            <div class="controls">
                {{ form.region}}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_phone">Phone:</label>
            <div class="controls">
                {{ form.phone }}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_qq">QQ:</label>
            <div class="controls">
                {{ form.qq }}
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="id_skype">Skype:</label>
            <div class="controls">
                {{ form.skype }}
            </div>
        </div>
				<button class="btn btn-primary pull-right" id = "register_btn">Sigun up</button>
	</div>
	<div class="span3"></div>
		
	</div>
    </form>
{% endblock %}
{% block script %}
<script type="text/javascript">
window.setTimeout(function() {
        $("#error_message").fadeTo(500, 0).slideUp(500, function() {
            $(this).remove();
        });

    }, 3000);

$("#id_password_confirm").blur(function() {
    var password = $("#id_password").val();
    var password_confirm = $("#id_password_confirm").val();
    if (password != password_confirm) {
        alert("Password do not match!");
        $("#register_btn").attr('disabled', 'disabled');
    }
    else $("#register_btn").removeAttr('disabled');
});

$(function() {
    var password = $("#id_password").val();
    var password_confirm = $("#id_password_confirm").val();
    var username = $("#id_username").val();
    if (username == "" || password == "" || password_confirm == "") {
        $("#register_btn").attr('disabled', 'disabled');
    }
});
</script>
{% endblock %}